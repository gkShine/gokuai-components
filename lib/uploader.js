module.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=109)}([function(e,t){e.exports=require("@babel/runtime/helpers/interopRequireDefault")},function(e,t,i){"use strict";function n(e,t,i,n,s,a,r,o){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=l):s&&(l=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(e,t){return l.call(t),u(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i(15)),a=i(16),r={name:"gk-touch",enable:(a.device.mobile||a.device.tablet)&&!a.device.windows,device:a.device,bind:function(e,t){if(!t.def.enable)return!1;new s.default(e,{enable:t.def.enable}).on(t.arg,function(e){t.value(e),t.modifiers.stop&&e.srcEvent.stopPropagation(),t.modifiers.prevent&&(e.preventDefault(),e.srcEvent.preventDefault())})},bindEl:function(e,t,i){if(!this.enable)return!1;new s.default(e,{enable:this.enable}).on(t,i)}};t.default=r},,,,,,function(e,t,i){"use strict";i.r(t);var n=i(9),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=s.a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"GkCheckbox",props:{"is-checked":Boolean,value:Boolean},data:function(){return{checked:this.isChecked}},watch:{isChecked:"updateChecked",checked:"updateValue"},methods:{updateValue:function(e){this.$emit("input",e)},updateChecked:function(){this.checked=this.isChecked},changeChecked:function(e){this.checked=this.$refs.checkbox.checked,this.$emit("change",this.checked,e)},setChecked:function(e){this.checked=e}}};t.default=n},function(e,t){e.exports=require("@babel/runtime/helpers/typeof")},,function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.bitSize=function(e,t){if(void 0===e||"-"===e)return e;"number"!=typeof e&&(e=Number(e));if(e<0)return"";var i=t&&["b","kb","mb","gb","tb","pb"]||["B","KB","MB","GB","TB","PB"],n=0;for(;e>=1024;){if(n>=5)return e+i[n];e/=1024,n++}return 0===e?e:Math.round(100*e)/100+i[n]},t.strToB=function(e){var t=(e=e.toUpperCase()).match(/[A-Z]+/i)[0],i=e.match(/[0-9]+/)[0];switch(t){case"KB":case"K":i*=1024;break;case"MB":case"M":i*=1048576;break;case"GB":case"G":i*=1073741824;break;case"TB":case"T":i*=1099511627776;break;case"PB":case"P":i*=0x4000000000000;break;case"EB":case"E":i*=0x1000000000000000}return i},t.formatDate=a,t.timeToDate=function(e,t){return a(new Date(e),t)},t.getOS=function(){var e="Others";navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1?e="Android":navigator.userAgent.indexOf("iPhone")>-1?e="iOS":navigator.userAgent.indexOf("Windows Phone")>-1?e="WP":window.navigator.userAgent.indexOf("Windows NT")>-1?e="Windows":window.navigator.userAgent.indexOf("Mac")>-1?e="Mac":window.navigator.userAgent.indexOf("X11")>-1?e="UNIX":window.navigator.userAgent.indexOf("Linux")>-1&&(e="Linux");return e},t.isIE=function(){var e=navigator.userAgent.toLowerCase();if(e.indexOf("msie")>-1)return e.match(/msie ([\d.]+)/)[1];if(e.indexOf("rv:11.0")>-1)return 11;return!1},t.intersect=function(e,t,i){var n={};for(var s in e)for(var a in t)if(JSON.stringify(e[s])===JSON.stringify(t[a])){n[a]=e[s];break}return i?Object.values(n):n},t.getSelected=function(e,t){var i={};if(void 0===e)return i;"object"===(0,s.default)(e)?e.forEach(function(e){i[e]=t[e]}):i[e]=t[e];return i},t.getExt=function(e){return e.slice(e.lastIndexOf(".")+1).toLowerCase()},t.baseName=function(e){return(e=e.toString()).replace(/\\/g,"/").replace(/.*\//,"")},t.dirName=function(e){return(e=e.toString()).indexOf("/")<0?"":e.replace(/\\/g,"/").replace(/\/[^\/]*$/,"")};var s=n(i(10));function a(e,t){t=t||"yyyy-MM-dd hh:mm:ss";var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("label",{staticClass:"gk-checkbox",class:{"is-checked":e.checked}},[i("span",{attrs:{"aria-checked":"mixed"}},[i("i",{class:{"gk-icon-checkbox":!e.checked,"gk-icon-checkcircle":e.checked}}),e._v(" "),e._t("default"),e._v(" "),i("input",{ref:"checkbox",attrs:{"aria-hidden":"true",type:"checkbox"},domProps:{checked:e.checked},on:{change:e.changeChecked}})],2)])},s=[];n._withStripped=!0,i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},function(e,t){e.exports=require("mdn-polyfills/Node.prototype.remove")},function(e,t){e.exports=require("hammerjs")},function(e,t){e.exports=require("device.js")},,function(e,t,i){"use strict";i.r(t);var n=i(13),s=i(8);for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var r=i(1),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="packages/checkbox/src/checkbox.vue",t.default=o.exports},,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t);var n=i(32),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=s.a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(12),s={name:"GkFileicon",props:{folder:Boolean,type:String,thumbnail:String,filename:String,size:{type:Number|String,default:32}},data:function(){return{showThumbnail:!!this.thumbnail}},watch:{thumbnail:"watchThumbnai"},computed:{sizeCls:function(){return"gk-fileicon-"+this.size},typeCls:function(){return this.folder?"gk-fileicon-"+(this.type?this.type+"-folder":"folder"):"gk-fileicon-"+(this.type||(0,n.getExt)(this.filename))}},methods:{watchThumbnai:function(e){this.showThumbnail=!!e}}};t.default=s},function(e,t,i){"use strict";i.r(t);var n=i(34),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=s.a},function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i(54)),a=n(i(65)),r=n(i(2)),o={name:"GkTable",mixins:[s.default],directives:{touch:r.default},components:{GkTableCell:a.default},props:{height:Number,"show-more":Boolean,"show-header":Boolean,data:{type:Array,required:!0},"more-text":{type:String,default:"loading..."}},data:function(){return{touchEnable:r.default.enable,columns:[],timer:0,page:1,hasScrollbar:!1}},computed:{computedStyle:function(){var e={};if(this.$refs.thead){if(!this.fit&&this.height){var t=this.height;if(this.showHeader){var i=window.getComputedStyle(this.$refs.thead.querySelector("th:first-child")).height;t-=parseInt(i)}e.height=t+"px"}return e}},tableStyle:function(){var e={};return this.fit?e:(this.height&&(e.height=this.height+"px"),e)}},methods:{handleSort:function(e,t){this.$emit("sort-by",e,t)},refreshCheckAllState:function(){var e=this.getHeadCheckbox();if(void 0!==e){var t=Object.keys(this.checked).length;e.setChecked(t>0&&t===this.data.length)}},getHeadCheckbox:function(){if(this.$refs.thead&&this.$refs.thead.querySelector("th.gk-table-checkbox"))return this.$children[0].$children[0]},setScrollbar:function(){if(this.$refs.table){var e=this.$refs.table;this.hasScrollbar=e.children[0].clientHeight>e.clientHeight}},windowResize:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.setScrollbar()},5)},documentKeyDown:function(e){if(!1===this.handleShortcut(e))return!1;38===e.keyCode?(this.handleSelectPrevNext(-1,e),e.preventDefault()):40===e.keyCode?(this.handleSelectPrevNext(1,e),e.preventDefault()):13===e.keyCode&&(this.handleDoubleClick(Object.values(this.selected)[0],Object.keys(this.selected)[0],e),e.preventDefault())},getColumns:function(){var e=[];this.$children.forEach(function(t){if(!t.isTableColumn)return!1;e.push(Object.assign({columnStyle:t.columnStyle,render:t.$scopedSlots.default},t.$props))}),JSON.stringify(this.columns)!==JSON.stringify(e)&&(this.columns=e)}},mounted:function(){var e=this;this.getColumns(),this.$nextTick(function(){e.setScrollbar()}),window.addEventListener("resize",this.windowResize)},updated:function(){this.getColumns(),this.setScrollbar()},destroyed:function(){window.removeEventListener("resize",this.windowResize)}};t.default=o},function(e,t,i){"use strict";i.r(t);var n=i(36),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=s.a},function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={name:"gkTableColumn",components:{GkCheckbox:n(i(18)).default},data:function(){return{isTableColumn:!0,order:this.sortable}},props:{label:String,width:Number|String,checkbox:Boolean,property:String,sortable:Boolean|String,align:String,valign:String,formatter:Function},computed:{columnClass:function(){return{"gk-table-checkbox":this.checkbox,"gk-table-sortable":this.showSort}},columnStyle:function(){var e={width:"number"==typeof this.width?this.width+"px":this.width};return null!==this.align&&(e["text-align"]=this.align),null!==this.valign&&(e["vertical-align"]=this.valign),e},showSort:function(){return void 0!==this.sortable}},methods:{checkAll:function(e){var t=e.target;this.$parent.handleCheckAll(t.checked)},handleClick:function(){var e=this;if(!this.showSort)return!1;switch(this.order){case"asc":this.order="desc";break;case"desc":this.order="";break;default:this.order="asc"}this.$parent.$children.forEach(function(t){e._uid!==t._uid&&t.showSort&&(t.order=void 0)}),this.$parent.handleSort(this.property,this.order)}}};t.default=s},,,,,,function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showThumbnail?i("img",{class:e.sizeCls,attrs:{src:e.thumbnail},on:{error:function(t){e.showThumbnail=!1}}}):i("i",{class:[e.sizeCls,e.typeCls]})},s=[];n._withStripped=!0,i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{staticClass:"gk-table",class:{"gk-table-with-header":e.showHeader,"gk-table-fit":e.fit,"gk-table-show-checkbox":e.showCheckbox},style:e.tableStyle},[i("table",{directives:[{name:"show",rawName:"v-show",value:e.showHeader,expression:"showHeader"}],ref:"thead",staticClass:"gk-table-header"},[i("thead",[i("tr",[e._t("default"),e._v(" "),e.hasScrollbar?i("th",{staticClass:"gk-table-header-last"}):e._e()],2)])]),e._v(" "),i("div",{directives:[{name:"scroll-load",rawName:"v-scroll-load",value:e.loadMore,expression:"loadMore"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticClass:"gk-table-body gk-scrollbar",class:{"gk-no-scrollbar":e.touchEnable},style:e.computedStyle,on:{contextmenu:function(t){e.handleContextmenu(null,null,t)},click:function(t){e.handleCancelSelect()}}},[e.data.length||e.loading?i("table",[i("tbody",e._l(e.data,function(t,n){return i("tr",{directives:[{name:"touch",rawName:"v-touch:tap.stop.prevent",value:function(i){return e.handleTap(t,n,i)},expression:"($event) => handleTap(item, index, $event)",arg:"tap",modifiers:{stop:!0,prevent:!0}}],key:n,staticClass:"gk-table-item",class:{"is-active":void 0!==e.selected[n]},on:{click:function(i){e.handleSelect(t,n,i)},dblclick:function(i){e.handleDoubleClick(t,n,i)},contextmenu:function(i){e.handleContextmenu(t,n,i)}}},e._l(e.columns,function(s,a){return i("gk-table-cell",{key:a,attrs:{"is-checked":void 0!==e.checked[n],index:n,data:t,column:s},on:{check:e.handleCheck}})}))}))]):i("div",{staticClass:"gk-table-empty"},[e._t("empty")],2)]),e._v(" "),e.showMore?i("div",{staticClass:"gk-table-more"},[i("span",{staticClass:"gk-table-more-text"},[e._v(e._s(e.moreText))])]):e._e()])},s=[];n._withStripped=!0,i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("th",{class:e.columnClass,style:e.columnStyle,on:{click:e.handleClick}},[e.checkbox?i("gk-checkbox",{attrs:{type:"checkbox"},nativeOn:{click:function(t){e.checkAll(t)}}}):i("span",[e._v(e._s(e.label))]),e._v(" "),e.showSort?i("span",{staticClass:"sortable",class:{"sortable-desc":"desc"===e.order,"sortable-asc":"asc"===e.order}},[i("i",{staticClass:"sort-caret asc"}),e._v(" "),i("i",{staticClass:"sort-caret desc"})]):e._e()],1)},s=[];n._withStripped=!0,i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(14);var n={name:"gk-loading",show:function(e){var t=this;if(!this.exist){var i=window.getComputedStyle(e).getPropertyValue("position");"static"!==i&&""!==i||(this.static=!0,e.style.position="relative"),e.classList.add("gk-loading-scope");var n=document.createElement("div");n.className="gk-loading-wrapper",n.style.top=e.scrollTop+"px",n.style.left=e.scrollLeft+"px",n.style.bottom=-e.scrollTop+"px",n.style.right=-e.scrollLeft+"px",!1!==this.options.bg&&(n.style.backgroundColor=this.options.bg),e.appendChild(n);var s=document.createElement("div");if(s.className="gk-loading",s.innerHTML='<svg style="styles" class="gk-loading-spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>',n.appendChild(s),!1!==this.options.text){s.classList.add("gk-loading-text");var a=document.createElement("p");a.textContent=this.options.text,s.appendChild(a)}this.box=n}this.exist=!0,window.requestAnimationFrame(function(){t.box.style.opacity="1"})},hide:function(e){var t=this;e.classList.remove("gk-loading-scope"),this.box.style.opacity="0.01";var i=function(){t.box&&t.box.remove(),t.box=null,t.exist=!1,t.static&&e.style.removeProperty("position")};"AnimationEvent"in window?this.box.addEventListener("transitionend",i):i()},bind:function(e,t){var i=t.def;i.box=null,i.init=!0,i.static=i.exist=!1,i.options={bg:e.getAttribute("gk-loading-background")||!1,text:e.getAttribute("gk-loading-text")||!1}},update:function(e,t){var i=t.def;if(i.init||t.oldValue!==t.value)if(t.value)i.show(e);else{if(!i.exist)return;i.hide(e)}}};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"gk-scroll-load",bind:function(e,t){var i=0,n=new Function("return {"+(e.getAttribute("gk-scroll-load-option")||"")+"}")();!1!==(n=Object.assign({distance:20,disabled:!1,frequency:200,selector:!1},n)).selector&&e.querySelector(n.selector).length&&(e=e.querySelector(n.selector));var s=function(){e.scrollTop&&e.scrollTop+e.clientHeight+n.distance>=e.scrollHeight&&"function"==typeof t.value&&t.value()};s(),e.onscroll=function(){n.disabled||(clearTimeout(i),i=setTimeout(function(){s()},n.frequency))}},update:function(e,t){}};t.default=n},,,,,,,,function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i(45)),a=n(i(46)),r=i(12),o=n(i(2)),l={directives:{loading:s.default,scrollLoad:a.default},props:{loading:Boolean,fit:Boolean,shortcut:Boolean,translate:Object,"right-selected":Boolean,"show-checkbox":Boolean,"before-select":Function,"scroll-on-check":Boolean,"scroll-on-select":Boolean,"default-index":Number|Array,"default-checked-index":{type:Number|Array,default:function(){return[]}},"select-on-check":{type:Boolean,default:!0},"check-on-select":{type:Boolean,default:!0}},data:function(){var e=(0,r.getSelected)(this.defaultIndex,this.data),t=(0,r.getSelected)(this.defaultCheckedIndex,this.data);return this.checkOnSelect&&(e=Object.assign(e,t)),this.selectOnCheck&&(t=Object.assign(t,e)),{scrollCheckAll:!1,scrollSelectAll:!1,lastSelectedIndex:-1,lastIndex:-1,clickTimer:!1,clickItem:!1,selected:e,checked:t}},watch:{data:"updateData"},methods:{gettext:function(e){return this.translate&&this.translate[e]||e},handleTap:function(e,t,i){if("function"==typeof this.beforeSelect&&!this.beforeSelect(e,t,i))return!1;clearTimeout(this.clickTimer),this.$emit("tap",e,i)},handleSelect:function(e,t,i,n){var s=this;return!(Object.keys(this.$listeners).indexOf("tap")>-1&&o.default.enable)&&(!("function"==typeof this.beforeSelect&&!this.beforeSelect(e,t,i))&&(this.clickItem=!0,clearTimeout(this.clickTimer),void(this.clickTimer=setTimeout(function(){if(i&&(i.ctrlKey||i.metaKey)){var a=s.selected;s.selected={},void 0===a[t]?(a[t]=e,s.lastSelectedIndex=t,s.selected=a):(delete a[t],s.selected=a)}else if(s.selected={},i&&i.shiftKey&&s.lastSelectedIndex>-1)for(var r=Math.min(t,s.lastSelectedIndex);r<=Math.max(t,s.lastSelectedIndex);r++)s.selected[r]=s.data[r];else{if(void 0!==s.selected[t])return;s.selected[t]=e,s.lastSelectedIndex=t}s.clickItem=!1,s.lastIndex=t,s.updateChecked(),s.$emit("select",s.getSelected(),i),n&&n()},20))))},handleCancelSelect:function(e){this.clickItem||o.default.enable||(this.selected={},this.lastIndex=-1,this.updateChecked(),this.$emit("select",null,e))},handleDoubleClick:function(e,t,i){clearTimeout(this.clickTimer),this.$emit("doubleClick",e,i)},handleCheck:function(e,t,i){i.target.checked?this.checked[t]=e:delete this.checked[t],this.refreshCheckAllState(),(this.checkOnSelect||this.selectOnCheck)&&(this.updateSelected(t),i.stopPropagation()),this.$emit("check",this.getChecked(),i)},handleContextmenu:function(e,t,i){var n=this;if(-1!==Object.keys(this.$listeners).indexOf("contextmenu")){var s=function(){return n.$emit("contextmenu",n.getSelected(),i)};null===e?(this.handleCancelSelect(i),s()):this.rightSelected&&void 0===this.selected[t]?this.handleSelect(e,t,i,s):s(),i.stopPropagation(),i.preventDefault()}},handleSelectPrevNext:function(e,t){if(-1===this.lastIndex)return!1;var i=parseInt(this.lastIndex)+e;if(i<0||i>this.data.length-1)return!1;this.handleSelect(this.data[i],i,t)},handleSelectAll:function(){this.selected=Object.assign({},this.data),this.lastIndex=this.data.length-1,this.updateChecked(),this.$emit("selectAll",event)},handleCheckAll:function(e){this.checked=e?Object.assign({},this.data):[],this.updateSelected(this.checked.length-1),this.$emit("checkAll",event)},handleShortcut:function(e){return(e.ctrlKey||e.metaKey)&&65===e.keyCode?(this.handleSelectAll(),e.preventDefault(),!1):(33===e.keyCode?(this.handleSelect(this.data[0],0,e),e.preventDefault()):35!==e.keyCode&&34!==e.keyCode||(this.handleSelect(this.data[this.data.length-1],this.data.length-1,e),e.preventDefault()),!!Object.keys(this.selected).length&&void 0)},loadMore:function(){this.scrollOnCheck&&(this.scrollCheckAll=Object.keys(this.checked).length===this.data.length),this.scrollOnSelect&&(this.scrollSelectAll=Object.keys(this.selected).length===this.data.length),this.$emit("load-more")},refreshCheckAllState:function(){return!1},updateChecked:function(){this.selectOnCheck&&(this.checked=Object.assign({},this.selected),this.refreshCheckAllState())},updateSelected:function(e){this.checkOnSelect&&(this.selected=Object.assign({},this.checked),this.lastIndex=e)},updateData:function(){this.checked=(0,r.intersect)(this.checked,this.data),this.selected=(0,r.intersect)(this.selected,this.data),this.scrollOnCheck&&this.scrollCheckAll&&(this.scrollCheckAll=!1,this.handleCheckAll(!0)),this.scrollOnSelect&&this.scrollSelectAll&&(this.scrollSelectAll=!1,this.selected=this.data),this.refreshCheckAllState()},select:function(e,t){void 0===this.selected[t]&&(this.selected={},this.selected[t]=e,this.lastSelectedIndex=t,this.updateChecked())},getSelected:function(){return Object.values(this.selected)},getSelectedIndex:function(){return Object.keys(this.selected)},getChecked:function(){return Object.values(this.checked)},getCheckedIndex:function(){return Object.keys(this.checked)}},mounted:function(){this.shortcut&&document.addEventListener("keydown",this.documentKeyDown)},destroyed:function(){this.shortcut&&document.removeEventListener("keydown",this.documentKeyDown)}};t.default=l},,,,,,,,,function(e,t,i){"use strict";i.r(t);var n=i(42),s=i(31);for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var r=i(1),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="packages/fileicon/src/fileicon.vue",t.default=o.exports},function(e,t,i){"use strict";i.r(t);var n=i(43),s=i(33);for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var r=i(1),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="packages/table/src/table.vue",t.default=o.exports},function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={name:"gkTableCell",components:{GkCheckbox:n(i(18)).default},props:{column:Object,data:Object,index:Number,isChecked:Boolean},render:function(e){var t,i=this,n=this.column;if(n.render)t=this.column.render({row:this.data,index:this.index});else if(n.checkbox)t=e("gk-checkbox",{props:{"is-checked":this.isChecked},nativeOn:{click:function(e){i.$emit("check",i.data,i.index,e)},dblclick:function(e){e.stopPropagation()}}});else if(n.property){var s=this.data[n.property];t=this.column.formatter?this.column.formatter(s,this.data,this.index):s}else this.column.formatter&&(t=this.column.formatter());return e("td",{style:n.columnStyle,class:{"gk-table-checkbox":n.checkbox}},[t])},computed:{label:function(){var e=this.data[this.column.property];return this.column.formatter?this.column.formatter(e,this.data):e}}};t.default=s},function(e,t,i){"use strict";i.r(t);var n=i(44),s=i(35);for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var r=i(1),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="packages/table/src/table-column.vue",t.default=o.exports},,,,,function(e,t,i){"use strict";i.r(t);var n=i(72),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t.default=s.a},function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(111);var s=n(i(112)),a=n(i(113)),r=n(i(64)),o=n(i(66)),l=n(i(63)),c=i(12),u=n(i(2)),d={name:"GkUploader",components:{GkTable:r.default,GkTableColumn:o.default,GkFileicon:l.default},props:{auto:{type:Boolean,default:!0},server:{type:String,required:!0},picker:Object,height:{type:Number,default:400},"head-tpl":{type:String,default:"selected :d"},"empty-content-width":{type:Number,default:500},"form-data":Object,buttons:Array,options:Object,fit:Boolean,dnd:String,chunked:Boolean,dialog:Boolean,translate:Object,"hide-delete":Boolean,"before-check":Function,"check-response":Function},data:function(){return{mini:!0,hidden:this.dialog,headLabel:this.headTpl.replace(":d",0),list:[],relation:{},finishFiles:[],uploader:!1,deleteButtons:[],emptyContentStyle:{}}},computed:{isMobile:function(){return u.default.device.mobile},showCheck:function(){return!this.auto},buttonList:function(){var e=this,t=[];return void 0===this.buttons?t=Object.values(this.defaultButtons):this.buttons.forEach(function(i){"folder"===i.type&&e.isIE||t.push(Object.assign(e.defaultButtons[i.type],i))}),t},defaultButtons:function(){return{delete:{type:"delete",class:"gk-uploader-delete"},file:{type:"file",class:"gk-uploader-file",multiple:!0},folder:{type:"folder",class:"gk-uploader-folder",multiple:!0}}},states:function(){return{ready:"ready",pause:"pause",cancel:"cancel",progress:"progress",success:"success",uploadError:"uploadError",error:"error"}}},watch:{mini:"changeMini",list:"changeList",finishFiles:"checkFinish",formData:{handler:"updateData",deep:!0}},methods:{gettext:function(e){return this.translate&&this.translate[e]||e},dialogTitle:function(){return this.finishFiles.length===this.list.length?this.gettext("Upload Finish"):this.gettext("Uploading (:n/:t)").replace(":n",this.finishFiles.length).replace(":t",this.list.length)},changeMini:function(){this.$refs.uploader.style.height=this.mini?"auto":this.height+"px"},changeList:function(){var e=this;this.hideDelete&&this.deleteButtons.forEach(function(t){t.style.display=e.list.length?"inline-block":"none"}),this.updateHeadLabel()},checkFinish:function(){this.finishFiles.length===this.list.length&&(this.$emit("finish"),this.dialog&&(this.mini=!0))},updateData:function(e){this.uploader.option("formData",e)},formatSize:function(e){return(0,c.bitSize)(e)},formatState:function(e,t){var i="";switch(t.state){case this.states.ready:i=this.auto?this.gettext("ready"):"";break;case this.states.pause:i=this.gettext("paused");break;case this.states.success:i=this.gettext("successful");break;case this.states.cancel:i=this.gettext("canceled");break;case this.states.uploadError:case this.states.error:i=this.uploader.getFile(t.id).statusText}return i?this.$createElement("span",{class:"uploader-state-"+t.state},i):t.percent>0?"".concat((100*t.percent).toFixed(2),"% ").concat((0,c.bitSize)(t.speed,!0),"/s"):""},formatOption:function(e,t){var i=this.$createElement,n=this,s=[];switch(t.state){case this.states.ready:case this.states.error:this.auto||s.push(i("i",{class:"gk-icon-times",on:{click:function(){n.removeFile(t.id)}}}));break;case this.states.pause:s.push(i("i",{class:"gk-icon-playarrow",on:{click:function(){var e=n.uploader.getFile(t.id);n.uploader.upload(e),t.state=n.states.progress}}}));break;case this.states.progress:this.chunked&&s.push(i("i",{class:"gk-icon-pause",on:{click:function(){n.uploader.stop(t.id),t.state=n.states.pause}}}));break;case this.states.cancel:case this.states.uploadError:s.push(i("i",{class:"gk-icon-redo",on:{click:function(){var e=n.uploader.getFile(t.id);n.uploader.retry(e),t.state=n.states.progress}}}))}return[this.states.pause,this.states.progress].indexOf(t.state)>-1&&s.push(i("i",{class:"gk-icon-times",on:{click:function(){n.uploader.cancelFile(t.id),Object.assign(t,{state:n.states.cancel,percent:0,speed:0})}}})),s},updateHeadLabel:function(){var e=this;setTimeout(function(){e.headLabel=e.headTpl.replace(":d",e.$refs.table.getCheckedIndex().length)},20)},findList:function(e){return this.list[this.relation[e]]},removeFile:function(e){var t=this.uploader.getFile(e);this.uploader.removeFile(t);var i=this.relation[e];this.list.splice(i,1),delete this.relation[e];for(var n=i;n<this.list.length;n++)this.relation[this.list[n].id]=n},webUpload:function(e){var t=this,i=document.querySelector(e.id);if(i&&i.addEventListener("mouseenter",function(){t.uploader.refresh()}),!1!==this.uploader)return this.uploader.addButton(e),this.uploader;var n=s.default.create(Object.assign({chunked:this.chunked,auto:this.auto,swf:a.default,server:this.server,pick:e,formData:this.formData||{},dnd:void 0===this.dnd?void 0:this.dnd?this.dnd:".gk-uploader",disableGlobalDnd:this.dnd,timeout:0},this.options||{}));return n.on("fileQueued",function(e){var i=!t.beforeCheck||t.beforeCheck(e);t.list.push({id:e.id,name:e.name,path:e.source.source.webkitRelativePath||e.name,state:!0===i?t.states.ready:t.states.error,size:e.size,percent:0,speed:0}),t.relation[e.id]=t.list.length-1,t.hidden=!1,t.dialog&&(t.mini=!1),!0!==i&&(t.finishFiles.push(e),e.setStatus("invalid",i)),t.$emit("before",e)}),n.on("uploadProgress",function(e,i){var n=t.findList(e.id),s=(new Date).getTime(),a=(s-(n.timestamp||s-1e3))/1e3,r=(i-n.percent)*n.size;Object.assign(n,{state:t.states.progress,percent:i,timestamp:s,speed:r/a}),t.$emit("progress",e,i)}),n.on("uploadBeforeSend",function(e,i){var n=t.findList(e.file.id);i.path=n.path.substring(0,n.path.lastIndexOf(i.name)-1)}),n.on("uploadSuccess",function(e,i){var n=t.findList(e.id),s=!t.checkResponse||t.checkResponse(e,i);!0===s?n.state=t.states.success:(n.state=t.states.uploadError,e.setStatus("error",s)),t.finishFiles.push(e),t.$emit("success",e,i)}),n.on("uploadError",function(e,i){t.findList(e.id).state=t.states.uploadError,e.setStatus("error",i),t.$emit("uploadError",e,i)}),n.on("error",function(e){t.$emit("error",null,e,{F_EXCEED_SIZE:"文件大小超过限制",Q_EXCEED_NUM_LIMIT:"文件上传数超出限制"})}),n.on("uploadComplete",function(e,i){t.$emit("complete",e,i)}),this.uploader=n,n},initDelete:function(e){var t=this;this.deleteButtons=document.querySelectorAll(e),this.deleteButtons.forEach(function(e){t.hideDelete&&(e.style.display="none"),e.onclick=function(){t.$refs.table.getChecked().forEach(function(e){t.removeFile(e.id)})}})},updateEmptyStyle:function(){var e=this.$refs.emptyContent.getBoundingClientRect();this.emptyContentWidth>window.innerWidth?this.emptyContentStyle={width:"96%","margin-left":"-48%","margin-top":"-24%"}:this.emptyContentStyle={width:this.emptyContentWidth+"px","margin-left":-this.emptyContentWidth/2+"px","margin-top":-e.height/2+"px"}},upload:function(){this.uploader.upload()}},mounted:function(){var e=this;this.updateEmptyStyle(),void 0!==this.picker?this.webUpload(this.picker):this.buttonList.forEach(function(t){switch(t.type){case"delete":e.initDelete("."+t.class);break;case"file":e.webUpload({id:"."+t.class,multiple:t.multiple});break;case"folder":e.webUpload({id:"."+t.class,multiple:t.multiple});var i=setInterval(function(){var e=document.querySelectorAll(".".concat(t.class," input[type=file]"));if(e.length>0){for(var n=0;n<e.length;n++)e[n].setAttribute("webkitdirectory","");clearInterval(i)}},10)}})}};t.default=d},,,,,,,function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{ref:"uploader",staticClass:"gk-uploader",class:{"gk-uploader-dialog":e.dialog,"gk-uploader-fit":e.fit,"gk-mobile-uploader":e.isMobile},style:{display:e.hidden?"none":"block"}},[e.dialog?i("div",{staticClass:"gk-uploader-head"},[i("h2",[e._v(e._s(e.dialogTitle()))]),e._v(" "),i("div",[i("i",{class:"gk-icon-window-"+(e.mini?"maximize":"minimize"),on:{click:function(t){e.mini=!e.mini}}}),i("i",{staticClass:"gk-icon-times",on:{click:function(t){e.hidden=!0}}})])]):e._e(),e._v(" "),i("div",{staticClass:"gk-uploader-body"},[i("gk-table",{ref:"table",attrs:{fit:e.fit||e.dialog,data:e.list,"show-header":e.showCheck,"show-checkbox":e.showCheck,height:e.height,"before-select":function(){return!1}},on:{check:e.updateHeadLabel}},[i("gk-table-column",{attrs:{checkbox:e.showCheck,width:20,align:"center"}}),e._v(" "),i("gk-table-column",{attrs:{property:"name",label:e.headLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[i("gk-fileicon",{attrs:{filename:t.row.name,size:24}}),e._v("\n                    "+e._s(t.row.name)+"\n                ")]}}])}),e._v(" "),i("gk-table-column",{attrs:{property:"size",width:"5%",formatter:e.formatSize}}),e._v(" "),i("gk-table-column",{attrs:{property:"percent",width:"15%",formatter:e.formatState}}),e._v(" "),i("gk-table-column",{attrs:{property:"state",formatter:e.formatOption,align:"center",width:"10%"}}),e._v(" "),i("div",{staticClass:"gk-uploader-empty",attrs:{slot:"empty"},slot:"empty"},[i("div",{ref:"emptyContent",staticClass:"gk-uploader-empty-content",style:e.emptyContentStyle},[e._t("default")],2)])],1)],1)])},s=[];n._withStripped=!0,i.d(t,"a",function(){return n}),i.d(t,"b",function(){return s})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(0);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=n(i(110));s.default.install=function(e){e.component(s.default.name,s.default)};var a=s.default;t.default=a},function(e,t,i){"use strict";i.r(t);var n=i(79),s=i(71);for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);var r=i(1),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="packages/uploader/src/uploader.vue",t.default=o.exports},function(e,t){e.exports=require("mdn-polyfills/NodeList.prototype.forEach")},function(e,t){e.exports=require("webuploader")},function(e,t){e.exports=require("webuploader/dist/Uploader.swf")}]);